workingFile: /opt/dlab/tmp/result/billing-data.json

# Adapter for reading source data. Known types: file, s3file
adapterIn:
  - type: file
    file: D:\DLab\BillingSampleData\dlab-billing-detailed-tags-2017-03-27.csv
#  - type: s3file
#    bucket: andriana-1143-17-2-ssn-bucket
#    file: test_report/test_aws_detail_report.csv
#    accessKeyId: AKIAJS2J7QIANW6SNPKQ
#    secretAccessKey: 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

# Adapter for writing converted data. Known types: console, file, s3file, mongodb
adapterOut:
#  - type: console
#    writeHeader: true
#  - type: fs
#    file: D:\DLab\BillingSampleData\test_out.csv
#    writeHeader: true
  - type: mongodlab
    host: localhost
    port: 27017
    username: admin
    password: XS3ms9R3tP
    database: dlabdb
#    bufferSize: 10000
    upsert: true

# Filter for source and converted data.
filter:
  - type: aws
    currencyCode: USD
    columnDlabTag: user:user:tag
    serviceBaseName: dlab_tag_0327c

# Parser of source data to common format.
parser:
  - type: csv
    columnStartDate: UsageStartDate
    headerLineNo: 1
    skipLines: 1
    columnMapping: >-
      dlab_id=user:user:tag;usage_date=UsageStartDate;product=ProductName;
      usage_type=UsageType;usage=UsageQuantity;cost=BlendedCost;
      resource_id=ResourceId;tags=Operation,ItemDescription
    aggregate: day
    # Default options:
    #aggregate: none
    #fieldSeparator: ","
    #fieldTerminator: "\""
    #decimalSeparator: "."
    #groupingSeparator: " "


# Logging configuration.
logging:
  # Default logging level
  level: INFO
  # Logging levels for appenders.
  loggers:
    com.epam: DEBUG
    org.apache.http: WARN
    org.mongodb.driver: WARN
    org.hibernate: WARN
 # Logging appenders
  appenders:
    - type: console
    - type: file
      currentLogFilename: /var/opt/dlab/log/ssn/billing.log
      archive: true
      archivedLogFilenamePattern: /var/opt/dlab/log/ssn/billing-%d{yyyy-MM-dd}.log.gz
      archivedFileCount: 10
